<div class="container mx-auto p-4 sm:p-6 lg:p-8 animate-fade-in">
  <div class="lg:grid lg:grid-cols-12 lg:gap-8">

    <!-- Sidebar com Categorias -->
    <aside class="lg:col-span-3 xl:col-span-2 mb-8 lg:mb-0">
      <div class="sticky top-8">
        <div class="card-elevated p-6">
          <div class="flex items-center gap-2 mb-4">
            <mat-icon class="text-primary">category</mat-icon>
            <h3 class="font-bold font-heading">Categorias</h3>
          </div>
          <div class="space-y-2">
            <button *ngFor="let category of categories" (click)="selectCategory(category)"
              [class.active]="category === selectedCategory()"
              class="filter-button w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-all hover:bg-muted group">
              <div class="flex items-center justify-between">
                <span>{{ category }}</span>
                <mat-icon *ngIf="category === selectedCategory()" class="text-primary text-sm">check</mat-icon>
              </div>
            </button>
          </div>
        </div>
      </div>
    </aside>

    <!-- Área Principal de Postagens -->
    <main class="lg:col-span-9 xl:col-span-10">
      <div class="flex items-center justify-between mb-8">
        <div>
          <h1 class="text-4xl font-bold font-heading text-foreground">Explorar Postagens</h1>
          <p class="text-muted-foreground mt-2">Descubra itens incríveis da comunidade</p>
        </div>
        <mat-icon class="text-primary text-5xl hidden md:block">grid_view</mat-icon>
      </div>

      <!-- Loading State -->
      <div *ngIf="isLoading()" class="space-y-6">
        <div *ngFor="let i of [1, 2, 3]" class="card-elevated p-6 animate-pulse">
          <div class="flex items-center gap-4 mb-4">
            <div class="w-12 h-12 rounded-full bg-muted"></div>
            <div class="flex-1 space-y-2">
              <div class="h-4 bg-muted rounded w-1/2"></div>
              <div class="h-3 bg-muted rounded w-1/3"></div>
            </div>
          </div>
          <div class="space-y-2">
            <div class="h-4 bg-muted rounded"></div>
            <div class="h-4 bg-muted rounded w-5/6"></div>
          </div>
        </div>
      </div>

      <!-- Lista de Postagens -->
      <div *ngIf="!isLoading()">
        <div *ngIf="filteredPosts().length > 0; else noPosts" class="space-y-6">
          <app-post-card *ngFor="let post of filteredPosts()" [post]="post" class="block animate-slide-up">
          </app-post-card>
        </div>

        <!-- Empty State -->
        <ng-template #noPosts>
          <div class="text-center py-20 card-elevated">
            <div class="inline-flex items-center justify-center w-20 h-20 rounded-2xl bg-muted/50 mb-6">
              <mat-icon class="text-muted-foreground text-5xl">search_off</mat-icon>
            </div>
            <h3 class="text-2xl font-bold font-heading mb-2">Nenhuma Postagem Encontrada</h3>
            <p class="text-muted-foreground mb-8 max-w-md mx-auto">
              Não há itens nesta categoria no momento. Que tal ser o primeiro a compartilhar?
            </p>
            <div class="flex flex-col sm:flex-row gap-4 justify-center">
              <button mat-raised-button color="primary" routerLink="/minhas-postagens">
                <mat-icon>add</mat-icon>
                <span class="ml-2">Criar Postagem</span>
              </button>
              <button mat-stroked-button (click)="selectCategory('Todos')">
                Ver Todas as Categorias
              </button>
            </div>
          </div>
        </ng-template>
      </div>
    </main>

  </div>
</div>