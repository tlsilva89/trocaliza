<div class="container mx-auto p-4 sm:p-6 lg:p-8">
  <div class="lg:grid lg:grid-cols-12 lg:gap-8">

    <aside class="lg:col-span-3 xl:col-span-2 mb-8 lg:mb-0">
      <div class="sticky top-8 space-y-6">
        <div class="p-4 bg-card border border-border rounded-lg">
          <h2 class="text-lg font-bold font-heading mb-4">A sua Ação Importa!</h2>
          <a mat-flat-button color="primary" routerLink="/minhas-postagens" class="w-full">
            <mat-icon>add</mat-icon>
            <span class="ml-2">Criar Postagem</span>
          </a>
        </div>
        <div class="p-4 bg-card border border-border rounded-lg">
          <h3 class="font-bold font-heading mb-4">Categorias</h3>
          <div class="flex flex-col space-y-2">
            <button *ngFor="let category of categories" (click)="selectCategory(category)"
              [class.active]="category === selectedCategory()"
              class="filter-button text-left p-2 rounded-md text-sm text-muted-foreground hover:bg-muted">
              {{ category }}
            </button>
          </div>
        </div>
      </div>
    </aside>

    <main class="lg:col-span-9 xl:col-span-10">
      <h1 class="text-3xl font-bold font-heading text-primary mb-6">Postagens Recentes</h1>

      <div *ngIf="isLoading()" class="space-y-6">
        <div *ngFor="let i of [1, 2, 3]"
          class="w-full bg-card border border-border rounded-lg p-4 shadow-lg animate-pulse">
          <div class="flex items-center">
            <div class="w-12 h-12 rounded-full bg-muted"></div>
            <div class="ml-4 space-y-2">
              <div class="h-4 w-48 bg-muted rounded"></div>
              <div class="h-3 w-32 bg-muted rounded"></div>
            </div>
          </div>
          <div class="mt-4 space-y-2">
            <div class="h-4 bg-muted rounded"></div>
            <div class="h-4 w-5/6 bg-muted rounded"></div>
          </div>
        </div>
      </div>

      <div *ngIf="!isLoading()">
        <div *ngIf="filteredPosts().length > 0; else noPosts" class="space-y-6">
          <app-post-card *ngFor="let post of filteredPosts()" [post]="post"></app-post-card>
        </div>
        <ng-template #noPosts>
          <div class="text-center py-16 bg-card border border-border rounded-lg">
            <mat-icon class="text-5xl text-muted-foreground mx-auto">search_off</mat-icon>
            <h3 class="mt-4 font-semibold">Nenhuma Postagem Encontrada</h3>
            <p class="text-muted-foreground mt-2 text-sm">Não há itens nesta categoria ou a comunidade ainda não postou.
            </p>
            <button mat-stroked-button color="primary" (click)="selectCategory('Todos')" class="mt-4">
              Ver Todas as Categorias
            </button>
          </div>
        </ng-template>
      </div>
    </main>

  </div>
</div>